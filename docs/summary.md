# PoE Trade Tool 開発スケジュール

## プロジェクト概要
- **技術スタック**: Electron
- **対応ゲーム**: Path of Exile (PoE1 & PoE2)
- **対応言語**: 日本語/英語クライアント
- **開発期間**: 約15-20日（3-4週間）

---

## Phase 0: 環境構築
**期間**: 1日

### 目標
Electron開発環境のセットアップと基本アプリケーションの起動

### タスク
- [ ] Node.js/npmのインストール確認
- [ ] Electronプロジェクトの初期化
- [ ] 基本的なウィンドウ表示
- [ ] Hot Reloadの設定（開発効率化）
- [ ] ディレクトリ構造の作成

### 成果物
- 基本的なElectronアプリが起動する
- 開発環境が整っている

---

## Phase 1: クリップボード監視とホットキー
**期間**: 2-3日

### 目標
Ctrl+Cでコピーしたアイテム情報を取得・解析

### タスク
- [ ] グローバルホットキー登録（`electron-globalShortcut`）
- [ ] クリップボード監視の実装
- [ ] アイテムテキストの基本パース（英語のみでOK）
- [ ] レアリティ判定（Normal/Magic/Rare/Unique）
- [ ] コンソールに出力して動作確認

### 成果物
PoEでアイテムをCtrl+C → ホットキーでアイテム名とレアリティを取得できる

### 技術ポイント
- `globalShortcut` API
- `clipboard` API
- テキストパーシング（正規表現）

---

## Phase 2: オーバーレイウィンドウの実装
**期間**: 3-4日

### 目標
ゲーム上に透明ウィンドウを表示

### タスク
- [ ] 透明ウィンドウの作成（`transparent: true`, `frame: false`）
- [ ] Always on Top設定
- [ ] クリックスルー（マウスイベントを下に透過）の実装
- [ ] ホットキーで表示/非表示の切り替え
- [ ] 簡単なHTML/CSSで情報表示
- [ ] ウィンドウ位置の調整機能

### 成果物
PoEプレイ中にホットキーで透明ウィンドウが表示され、ゲーム操作を邪魔しない

### 技術ポイント
- `BrowserWindow`のオプション設定
- `setIgnoreMouseEvents()`
- CSS（透明度、レイアウト）

---

## Phase 3: 多言語アイテム名の判別
**期間**: 3-4日

### 目標
日本語/英語クライアントの両対応

### タスク
- [ ] アイテム名の言語検出ロジック
- [ ] 日本語→英語のマッピングデータ作成
  - [ ] 主要なユニークアイテム（50-100個程度）
  - [ ] 通貨アイテム全種
  - [ ] ベースタイプ（武器・防具）の主要なもの
- [ ] 言語判別のテスト（正規表現や文字コード判定）
- [ ] JSONデータファイルの管理

### 成果物
日本語クライアントでコピーしたアイテムを英語名に変換できる

### 技術ポイント
- 文字コード判定（ひらがな/カタカナ/漢字の検出）
- JSONデータの読み込みと検索
- データ管理の設計

---

## Phase 4: Mod（接辞）の多言語対応
**期間**: 4-5日

### 目標
アイテムのModを解析・翻訳

### タスク
- [ ] Modの正規表現パターン作成
  - 例: `"+# to maximum Life"` → `"+# 最大ライフ"`
- [ ] 数値の抽出と範囲判定
- [ ] 主要Modのマッピングデータ作成（100-200個程度）
  - [ ] ライフ/マナ系
  - [ ] レジスタンス系
  - [ ] ダメージ系
  - [ ] 攻撃速度/キャストスピード系
- [ ] 複雑なMod（複合、可変値）の処理
- [ ] Mod優先度の設定（重要なModの判定）

### 成果物
レアアイテムのModを解析し、検索用データに変換できる

### 技術ポイント
- 高度な正規表現
- データ正規化
- Mod重要度のアルゴリズム

---

## Phase 5: 統合とUI改善
**期間**: 2-3日

### 目標
実用可能なプロトタイプの完成

### タスク
- [ ] Phase 1-4の統合
- [ ] オーバーレイUIのデザイン改善
- [ ] エラーハンドリング
- [ ] 基本的な設定画面（ホットキー変更など）
- [ ] ログ機能の実装
- [ ] パフォーマンス最適化

### 成果物
実用可能なプロトタイプ（API連携前）

### 技術ポイント
- エラーハンドリング
- UI/UXデザイン
- 設定の永続化

---

## 今後の拡張フェーズ（Phase 6以降）

### Phase 6: PoE公式API連携
- トレードAPI検索クエリの生成
- API結果の取得と表示
- レート制限の処理

### Phase 7: PoE2対応
- PoE2のアイテムフォーマット対応
- APIエンドポイントの切り替え

### Phase 8: 追加機能
- Whisper（トレードメッセージ）の自動生成
- お気に入り検索の保存
- 履歴管理
- 価格履歴グラフ

---

## 開発Tips

### Electron初心者向けポイント
- Main Process（Node.js環境）とRenderer Process（ブラウザ環境）の違いを理解する
- IPC通信（プロセス間通信）の使い方を習得する
- セキュリティ（`contextIsolation`, `nodeIntegration`）に注意

### デバッグ方法
- Main Process: `console.log()`とターミナル出力
- Renderer Process: DevToolsを使用
- `electron .`コマンドでアプリ起動

### 参考リソース
- Electron公式ドキュメント: https://www.electronjs.org/docs/latest
- PoE公式Trade API: https://www.pathofexile.com/developer/docs/reference
- Awaken PoE Trade (参考実装): https://github.com/SnosMe/awakened-poe-trade

---

## 進捗管理

| Phase   | 開始日 | 完了日 | ステータス |
| ------- | ------ | ------ | ---------- |
| Phase 0 | -      | -      | 🔄 進行中   |
| Phase 1 | -      | -      | ⏳ 未着手   |
| Phase 2 | -      | -      | ⏳ 未着手   |
| Phase 3 | -      | -      | ⏳ 未着手   |
| Phase 4 | -      | -      | ⏳ 未着手   |
| Phase 5 | -      | -      | ⏳ 未着手   |

---

## 注意事項

1. **パフォーマンス**: PoEプレイ中に動作するため、メモリとCPU使用量に注意
2. **API制限**: PoE公式APIにはレート制限があるため、適切なキャッシング実装が必要
3. **ゲームアップデート**: PoEのアップデートでアイテムフォーマットが変わる可能性に備える
4. **セキュリティ**: クリップボード監視の権限管理に注意
